10 )Sokoban in VTL-2
11 M=&+10
12 G=&+1
13 :G)=32
14 :G+1)=46
15 :G+2)=35
16 :G+3)=38
17 :G+4)=45
18 :G+6)=36
20 R=0
50 #=100
70 #=700
100 )Load level
105 L=!
110 A=&
115 A=A-1
120 #=:A-1)=41*(:A)=42)=0*115
140 W=0
145 H=1
146 I=0
150 A=A+1
160 T=:A)
170 #=T=64*230
175 #=T<48*260
176 #=T=59*L
180 T=T-48
190 :M+I)=T
200 I=I+1
210 W=W+1
220 #=150
230 O=W
240 V=H-1
245 T=1
250 #=190
260 W=0
270 H=H+1
275 A=A+1
276 #=:A)=41=0*275
280 #=150
400 )Print level
405 L=!
406 $=27
407 ?="[1;1H";
408 $=27
409 ?="[0J";
410 ?=R;
411 ?=" moves"
415 Y=0
420 X=0
430 #=X=O*(Y=V)=0*460
440 ?="@";
450 #=470
460 $=:G+:Y*W+M+X))
470 X=X+1
480 #=X<W*421
485 $=10
486 Y=Y+1
490 #=Y<H*420
500 #=L
700 )Play the game
703 #=400
704 ?="hjkl to move, q to quit ";
705 K=$
706 X=0
707 Y=0
710 #=K=104=0*720
715 X=0-1
716 #=800
720 #=K=106=0*730
725 Y=1
726 #=800
730 #=K=107=0*740
735 Y=0-1
736 #=800
740 #=K=108=0*750
745 X=1
746 #=800
750 #=K=113=0*705
755 #=9999
800 )Move player
805 C=O+X
810 D=V+Y
814 A=D*W+M+C)
815 T=:D*W+M+C)
820 #=T=1+(T=4)=0=0*850
825 #=T=2*705
826 B=Y*W+A+X)
830 T=:B)
835 #=T=1=0*(T=4=0)*705
840 :A)=:A)-2
845 :B)=:B)+2
850 O=C
855 V=D
856 R=R+1
860 A=M
865 B=M+W*H
870 #=:A)=3*700
875 A=A+1
880 #=A=B=0*870
884 #=400
885 ?="You win!"
890 #=9999
1000 )*0000222220000000000
1001 )0000211120000000000
1002 )0000231120000000000
1003 )0022211322000000000
1004 )0021131312000000000
1005 )2221212212000222222
1006 )2111212212222211442
1007 )2131131111111111442
1008 )22222122212@2211442
1009 )0000211111222222222
1010 )0000222222200000000;

